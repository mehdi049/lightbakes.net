function isInViewport(t) { var i = t.getBoundingClientRect(); return (0 < i.height || 0 < i.width) && 0 <= i.bottom && 0 <= i.right && i.top <= (window.innerHeight || document.documentElement.clientHeight) && i.left <= (window.innerWidth || document.documentElement.clientWidth) } $(document).ready(function () { var s = $(window).scrollTop(); $(".parallax-section").each(function () { var t = $(this).data("image-src"), i = $(this).data("height"); $(this).css("background-image", "url(" + t + ")"), $(this).css("height", i); var n = $(this).offset().top, e = $(this).height(), o = s - n, h = Math.round(o / e * 100); $(this).css("background-position", "center " + parseInt(-1.5 * h) + "px") }), $(window).scroll(function () { var o = $(window).scrollTop(); $(".parallax-section").each(function () { var t, i, n = $(this).offset().top, e = $(this).height(); $(this).height(); isInViewport(this) && (t = o - n, i = Math.round(t / e * 100), $(this).css("background-position", "center " + parseInt(-1.5 * i) + "px")) }) }) });